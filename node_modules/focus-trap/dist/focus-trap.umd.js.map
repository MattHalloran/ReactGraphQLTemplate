{"version":3,"file":"focus-trap.umd.js","sources":["../index.js"],"sourcesContent":["import { tabbable, isFocusable } from 'tabbable';\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = (function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function (trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n\n    deactivateTrap: function (trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    },\n  };\n})();\n\nfunction createFocusTrap(element, userOptions) {\n  var doc = document;\n  var container =\n    typeof element === 'string' ? doc.querySelector(element) : element;\n\n  var config = {\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    ...userOptions,\n  };\n\n  var state = {\n    firstTabbableNode: null,\n    lastTabbableNode: null,\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n  };\n\n  var trap = {\n    activate: activate,\n    deactivate: deactivate,\n    pause: pause,\n    unpause: unpause,\n  };\n\n  return trap;\n\n  function activate(activateOptions) {\n    if (state.active) return;\n\n    updateTabbableNodes();\n\n    state.active = true;\n    state.paused = false;\n    state.nodeFocusedBeforeActivation = doc.activeElement;\n\n    var onActivate =\n      activateOptions && activateOptions.onActivate\n        ? activateOptions.onActivate\n        : config.onActivate;\n    if (onActivate) {\n      onActivate();\n    }\n\n    addListeners();\n    return trap;\n  }\n\n  function deactivate(deactivateOptions) {\n    if (!state.active) return;\n\n    clearTimeout(activeFocusDelay);\n\n    removeListeners();\n    state.active = false;\n    state.paused = false;\n\n    activeFocusTraps.deactivateTrap(trap);\n\n    var onDeactivate =\n      deactivateOptions && deactivateOptions.onDeactivate !== undefined\n        ? deactivateOptions.onDeactivate\n        : config.onDeactivate;\n    if (onDeactivate) {\n      onDeactivate();\n    }\n\n    var returnFocus =\n      deactivateOptions && deactivateOptions.returnFocus !== undefined\n        ? deactivateOptions.returnFocus\n        : config.returnFocusOnDeactivate;\n    if (returnFocus) {\n      delay(function () {\n        tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n      });\n    }\n\n    return trap;\n  }\n\n  function pause() {\n    if (state.paused || !state.active) return;\n    state.paused = true;\n    removeListeners();\n  }\n\n  function unpause() {\n    if (!state.paused || !state.active) return;\n    state.paused = false;\n    updateTabbableNodes();\n    addListeners();\n  }\n\n  function addListeners() {\n    if (!state.active) return;\n\n    // There can be only one listening focus trap at a time\n    activeFocusTraps.activateTrap(trap);\n\n    // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n    activeFocusDelay = delay(function () {\n      tryFocus(getInitialFocusNode());\n    });\n\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false,\n    });\n\n    return trap;\n  }\n\n  function removeListeners() {\n    if (!state.active) return;\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n\n    return trap;\n  }\n\n  function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n    var node = optionValue;\n    if (!optionValue) {\n      return null;\n    }\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n      if (!node) {\n        throw new Error('`' + optionName + '` refers to no known node');\n      }\n    }\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error('`' + optionName + '` did not return a node');\n      }\n    }\n    return node;\n  }\n\n  function getInitialFocusNode() {\n    var node;\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (container.contains(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      node = state.firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error(\n        'Your focus-trap needs to have at least one focusable element'\n      );\n    }\n\n    return node;\n  }\n\n  function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n  function checkPointerDown(e) {\n    if (container.contains(e.target)) return;\n    if (config.clickOutsideDeactivates) {\n      deactivate({\n        returnFocus: !isFocusable(e.target),\n      });\n      return;\n    }\n    // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n    if (\n      config.allowOutsideClick &&\n      (typeof config.allowOutsideClick === 'boolean'\n        ? config.allowOutsideClick\n        : config.allowOutsideClick(e))\n    ) {\n      return;\n    }\n    e.preventDefault();\n  }\n\n  // In case focus escapes the trap for some strange reason, pull it back in.\n  function checkFocusIn(e) {\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (container.contains(e.target) || e.target instanceof Document) {\n      return;\n    }\n    e.stopImmediatePropagation();\n    tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n  }\n\n  function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      deactivate();\n      return;\n    }\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  }\n\n  // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n  function checkTab(e) {\n    updateTabbableNodes();\n    if (e.shiftKey && e.target === state.firstTabbableNode) {\n      e.preventDefault();\n      tryFocus(state.lastTabbableNode);\n      return;\n    }\n    if (!e.shiftKey && e.target === state.lastTabbableNode) {\n      e.preventDefault();\n      tryFocus(state.firstTabbableNode);\n      return;\n    }\n  }\n\n  function checkClick(e) {\n    if (config.clickOutsideDeactivates) return;\n    if (container.contains(e.target)) return;\n    if (\n      config.allowOutsideClick &&\n      (typeof config.allowOutsideClick === 'boolean'\n        ? config.allowOutsideClick\n        : config.allowOutsideClick(e))\n    ) {\n      return;\n    }\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  function updateTabbableNodes() {\n    var tabbableNodes = tabbable(container);\n    state.firstTabbableNode = tabbableNodes[0] || getInitialFocusNode();\n    state.lastTabbableNode =\n      tabbableNodes[tabbableNodes.length - 1] || getInitialFocusNode();\n  }\n\n  function tryFocus(node) {\n    if (node === doc.activeElement) return;\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n    node.focus({ preventScroll: !!config.preventScroll });\n    state.mostRecentlyFocusedNode = node;\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  }\n}\n\nfunction isSelectableInput(node) {\n  return (\n    node.tagName &&\n    node.tagName.toLowerCase() === 'input' &&\n    typeof node.select === 'function'\n  );\n}\n\nfunction isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n}\n\nfunction isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n}\n\nfunction delay(fn) {\n  return setTimeout(fn, 0);\n}\n\nexport { createFocusTrap };\n"],"names":["isFocusable","tabbable"],"mappings":"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"}